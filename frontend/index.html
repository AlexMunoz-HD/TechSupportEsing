<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechSupport - Dashboard de Orquestación y Auditoría</title>
    
    <style>
        /* Ensure perfect circular avatars */
        .user-avatar {
            height: 2rem;
            width: 2rem;
            border-radius: 50%;
            background: linear-gradient(135deg, #2563eb, #7c3aed);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            min-width: 2rem;
            min-height: 2rem;
        }
        
        .user-avatar span {
            color: white;
            font-size: 0.875rem;
            font-weight: 600;
            line-height: 1;
        }

        /* Login Success Animation */
        .login-success-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #10B981, #059669);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: scale(0);
            transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .login-success-animation.show {
            opacity: 1;
            transform: scale(1);
        }

        .login-success-content {
            text-align: center;
            color: white;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.8s ease-out 0.3s;
        }

        .login-success-animation.show .login-success-content {
            transform: translateY(0);
            opacity: 1;
        }

        .login-success-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            animation: bounce 0.6s ease-out 0.5s;
        }

        .login-success-title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            animation: titleGlow 2s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            0% {
                text-shadow: 0 2px 4px rgba(0,0,0,0.3), 0 0 10px rgba(255,255,255,0.3);
                transform: scale(1);
            }
            100% {
                text-shadow: 0 2px 4px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,255,0.6);
                transform: scale(1.05);
            }
        }

        .login-success-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        /* Pulse animation for the background */
        .login-success-animation::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: pulse 1.5s ease-out;
        }

        @keyframes pulse {
            0% {
                width: 0;
                height: 0;
                opacity: 1;
            }
            100% {
                width: 200px;
                height: 200px;
                opacity: 0;
            }
        }

        /* Dark mode styles */
        [data-theme="dark"] {
            color-scheme: dark;
        }

        [data-theme="dark"] body {
            background-color: #111827;
            color: #f9fafb;
        }

        [data-theme="dark"] .bg-white {
            background-color: #1f2937 !important;
        }

        [data-theme="dark"] .bg-gray-50 {
            background-color: #374151 !important;
        }

        [data-theme="dark"] .bg-gray-100 {
            background-color: #4b5563 !important;
        }

        [data-theme="dark"] .text-gray-900 {
            color: #f9fafb !important;
        }

        [data-theme="dark"] .text-gray-700 {
            color: #d1d5db !important;
        }

        [data-theme="dark"] .text-gray-600 {
            color: #9ca3af !important;
        }

        [data-theme="dark"] .text-gray-500 {
            color: #6b7280 !important;
        }

        [data-theme="dark"] .border-gray-200 {
            border-color: #374151 !important;
        }

        [data-theme="dark"] .border-gray-300 {
            border-color: #4b5563 !important;
        }

        [data-theme="dark"] .divide-gray-200 > * + * {
            border-color: #374151 !important;
        }

        [data-theme="dark"] .hover\:bg-gray-50:hover {
            background-color: #374151 !important;
        }

        [data-theme="dark"] .hover\:bg-gray-100:hover {
            background-color: #4b5563 !important;
        }

        [data-theme="dark"] .shadow-sm {
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.3) !important;
        }

        [data-theme="dark"] .shadow {
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3), 0 1px 2px 0 rgba(0, 0, 0, 0.2) !important;
        }

        [data-theme="dark"] .shadow-lg {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2) !important;
        }

        [data-theme="dark"] input, [data-theme="dark"] select, [data-theme="dark"] textarea {
            background-color: #374151 !important;
            border-color: #4b5563 !important;
            color: #f9fafb !important;
        }

        [data-theme="dark"] input::placeholder, [data-theme="dark"] textarea::placeholder {
            color: #9ca3af !important;
        }

        [data-theme="dark"] input:focus, [data-theme="dark"] select:focus, [data-theme="dark"] textarea:focus {
            border-color: #3b82f6 !important;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
        }

        /* Modal dark mode */
        [data-theme="dark"] .modal-content {
            background-color: #1f2937 !important;
            border-color: #374151 !important;
        }

        [data-theme="dark"] .modal-header {
            border-bottom-color: #374151 !important;
        }

        [data-theme="dark"] .modal-footer {
            border-top-color: #374151 !important;
        }

        /* Button dark mode */
        [data-theme="dark"] .btn-secondary {
            background-color: #374151 !important;
            color: #f9fafb !important;
            border-color: #4b5563 !important;
        }

        [data-theme="dark"] .btn-secondary:hover {
            background-color: #4b5563 !important;
        }

        /* Dropdown dark mode */
        [data-theme="dark"] .dropdown-menu {
            background-color: #1f2937 !important;
            border-color: #374151 !important;
        }

        [data-theme="dark"] .dropdown-item:hover {
            background-color: #374151 !important;
        }

        /* Table dark mode */
        [data-theme="dark"] table {
            background-color: #1f2937 !important;
        }

        [data-theme="dark"] thead {
            background-color: #374151 !important;
        }

        [data-theme="dark"] tbody tr:hover {
            background-color: #374151 !important;
        }

        /* Progress bar dark mode */
        [data-theme="dark"] .progress-bar {
            background-color: #374151 !important;
        }

        [data-theme="dark"] .progress-fill {
            background-color: #3b82f6 !important;
        }

        /* Status badges dark mode */
        [data-theme="dark"] .badge-success {
            background-color: #065f46 !important;
            color: #6ee7b7 !important;
        }

        [data-theme="dark"] .badge-warning {
            background-color: #92400e !important;
            color: #fcd34d !important;
        }

        [data-theme="dark"] .badge-danger {
            background-color: #991b1b !important;
            color: #fca5a5 !important;
        }

        [data-theme="dark"] .badge-info {
            background-color: #1e40af !important;
            color: #93c5fd !important;
        }
    </style>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <!-- Tailwind CSS CDN - Development only. For production, install as PostCSS plugin -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        
        /* Professional Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInUpDelay {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes gradientX {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }
        
        .animate-fade-in-up {
            animation: fadeInUp 0.8s ease-out forwards;
            opacity: 0;
        }
        
        .animate-fade-in-up-delay {
            animation: fadeInUpDelay 0.8s ease-out 0.3s forwards;
            opacity: 0;
        }
        
        .animate-gradient-x {
            background-size: 200% 200%;
            animation: gradientX 3s ease infinite;
        }
        
        /* Floating animation for abstract shapes */
        @keyframes float {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
            }
            50% {
                transform: translateY(-20px) rotate(5deg);
            }
        }
        
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }
        
        .animate-float-delay {
            animation: float 6s ease-in-out infinite 2s;
        }
        
        /* Enhanced animations for SVG elements */
        @keyframes pulse-glow {
            0%, 100% {
                opacity: 0.6;
                filter: drop-shadow(0 0 5px rgba(59, 130, 246, 0.3));
            }
            50% {
                opacity: 1;
                filter: drop-shadow(0 0 15px rgba(59, 130, 246, 0.6));
            }
        }
        
        @keyframes orbit {
            from {
                transform: rotate(0deg) translateX(40px) rotate(0deg);
            }
            to {
                transform: rotate(360deg) translateX(40px) rotate(-360deg);
            }
        }
        
        .animate-pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite;
        }
        
        .animate-orbit {
            animation: orbit 8s linear infinite;
        }
        .dashboard-container {
            min-height: calc(100vh - 64px);
            padding: 1.5rem;
            max-width: 1400px;
            margin: 0 auto;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        .chart-container {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            margin-bottom: 1.5rem;
            height: 300px;
        }
        .activity-container {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            margin-bottom: 1.5rem;
            height: 300px;
            overflow-y: auto;
        }
        .section-spacing {
            margin-bottom: 2rem;
        }
        .card-spacing {
            margin-bottom: 1rem;
        }
        .compact-card {
            padding: 1rem;
            height: auto;
            min-height: 120px;
        }
        .chart-height {
            height: 200px;
        }
        .card-shadow-lg {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .animate-pulse-slow {
            animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
        .notification-enter {
            animation: slideInRight 0.3s ease-out;
        }
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* Dark Theme Styles */
        .dark-theme {
            background-color: #1f2937;
            color: #f9fafb;
        }
        
        .dark-theme .bg-white {
            background-color: #374151;
        }
        
        .dark-theme .bg-gray-50 {
            background-color: #4b5563;
        }
        
        .dark-theme .text-gray-900 {
            color: #f9fafb;
        }
        
        .dark-theme .text-gray-700 {
            color: #d1d5db;
        }
        
        .dark-theme .text-gray-500 {
            color: #9ca3af;
        }
        
        .dark-theme .border-gray-200 {
            border-color: #4b5563;
        }
        
        .dark-theme .border-gray-300 {
            border-color: #6b7280;
        }
        
        .dark-theme input,
        .dark-theme select,
        .dark-theme textarea {
            background-color: #374151;
            border-color: #6b7280;
            color: #f9fafb;
        }
        
        .dark-theme input:focus,
        .dark-theme select:focus,
        .dark-theme textarea:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .dark-theme .bg-gray-200 {
            background-color: #6b7280;
        }
        
        .dark-theme .hover\:bg-gray-50:hover {
            background-color: #4b5563;
        }
        
        .dark-theme .hover\:bg-gray-100:hover {
            background-color: #6b7280;
        }
        
        .dark-theme .bg-gray-100 {
            background-color: #6b7280;
        }
        
        .dark-theme .bg-gray-600 {
            background-color: #9ca3af;
        }
        
        .dark-theme .bg-gray-600\/bg-opacity-50 {
            background-color: rgba(75, 85, 99, 0.5);
        }
        
        /* Dropdown Styles */
        .dropdown-enter {
            animation: dropdownFadeIn 0.2s ease-out;
        }
        
        @keyframes dropdownFadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .dark-theme .dropdown-menu {
            background-color: #374151;
            border-color: #4b5563;
        }
        
        .dark-theme .dropdown-item {
            color: #d1d5db;
        }
        
        .dark-theme .dropdown-item:hover {
            background-color: #4b5563;
        }
        
        /* Light Theme Styles */
        .light-theme {
            background-color: #f9fafb;
            color: #111827;
        }
        
        /* Auto Theme - follows system preference */
        @media (prefers-color-scheme: dark) {
            .auto-theme {
                background-color: #1f2937;
                color: #f9fafb;
            }
            
            .auto-theme .bg-white {
                background-color: #374151;
            }
            
            .auto-theme .bg-gray-50 {
                background-color: #4b5563;
            }
            
            .auto-theme .text-gray-900 {
                color: #f9fafb;
            }
            
            .auto-theme .text-gray-700 {
                color: #d1d5db;
            }
            
            .auto-theme .text-gray-500 {
                color: #9ca3af;
            }
            
            .auto-theme .border-gray-200 {
                border-color: #4b5563;
            }
            
            .auto-theme .border-gray-300 {
                border-color: #6b7280;
            }
            
            .auto-theme input,
            .auto-theme select,
            .auto-theme textarea {
                background-color: #374151;
                border-color: #6b7280;
                color: #f9fafb;
            }
            
            .auto-theme input:focus,
            .auto-theme select:focus,
            .auto-theme textarea:focus {
                border-color: #3b82f6;
                box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            }
            
            .auto-theme .bg-gray-200 {
                background-color: #6b7280;
            }
            
            .auto-theme .hover\:bg-gray-50:hover {
                background-color: #4b5563;
            }
            
            .auto-theme .hover\:bg-gray-100:hover {
                background-color: #6b7280;
            }
            
            .auto-theme .bg-gray-100 {
                background-color: #6b7280;
            }
            
            .auto-theme .bg-gray-600 {
                background-color: #9ca3af;
            }
            
            .auto-theme .bg-gray-600\/bg-opacity-50 {
                background-color: rgba(75, 85, 99, 0.5);
            }
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Login Success Animation -->
    <div id="loginSuccessAnimation" class="login-success-animation">
        <div class="login-success-content">
            <div class="login-success-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="login-success-title">¡Comencemos!</div>
            <div class="login-success-subtitle">Redirigiendo al dashboard...</div>
        </div>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 bg-white z-50 flex items-center justify-center">
        <div class="text-center">
            <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-primary-600 mx-auto mb-4"></div>
            <h2 class="text-xl font-semibold text-gray-700">Cargando TechSupport Dashboard...</h2>
        </div>
    </div>

    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen bg-white flex hidden">
        <!-- Left Column - Login Form -->
        <div class="flex-1 flex items-center justify-center px-8">
            <div class="w-full max-w-md">
                <!-- Logo -->
                <div class="text-center mb-8">
                    <div class="inline-flex items-center justify-center mb-4">
                        <!-- Xepelin Logo -->
                        <svg viewBox="0 0 80 20" class="mr-3" preserveAspectRatio="xMidYMid meet" style="width: 80px; height: 20px; flex-shrink: 0;">
                            <!-- Top parallelogram -->
                            <path d="M 4 6 L 20 4 L 22 6 L 6 8 Z" stroke="#1E40AF" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                            <!-- Bottom parallelogram -->
                            <path d="M 6 8 L 22 6 L 24 8 L 8 10 Z" stroke="#1E40AF" stroke-width="1.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <!-- Xepelin Text -->
                        <span class="text-xl font-medium text-blue-800 tracking-wider">xepelin</span>
                    </div>
                    <h1 class="text-4xl font-bold text-black">¡Bienvenido de vuelta!</h1>
                </div>

                <!-- Login Form -->
                <div class="bg-white rounded-2xl shadow-xl p-8 border border-gray-100">
                    <!-- Form Fields -->
                    <form id="loginForm" class="space-y-6">
                        <!-- Email Field -->
                        <div class="space-y-2">
                            <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"></path>
                                    </svg>
                                </div>
                                <input id="email" name="email" type="email" required
                                    class="w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white"
                                    placeholder="tu@email.com">
                            </div>
                        </div>

                        <!-- Password Field -->
                        <div class="space-y-2">
                            <label for="password" class="block text-sm font-medium text-gray-700">Contraseña</label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                                    </svg>
                                </div>
                                <input id="password" name="password" type="password" required
                                    class="w-full pl-10 pr-12 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 bg-gray-50 focus:bg-white"
                                    placeholder="••••••••">
                                <button type="button" id="togglePassword" class="absolute inset-y-0 right-0 pr-4 flex items-center justify-center w-10 h-full hover:bg-gray-100 rounded-r-xl transition-all duration-200 group">
                                    <svg id="eyeIcon" class="h-5 w-5 text-gray-500 group-hover:text-blue-600 transition-colors duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <!-- Modern eye icon -->
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <!-- Options Row -->
                        <div class="flex items-center justify-between">
                            <label class="flex items-center cursor-pointer">
                                <input type="checkbox" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-full focus:ring-blue-500 focus:ring-2">
                                <span class="ml-2 text-sm text-gray-600">Mantener sesión</span>
                            </label>
                            <a href="#" onclick="showForgotPasswordPopup(); return false;" class="text-sm text-blue-600 hover:text-blue-800 cursor-pointer font-medium transition-colors">¿Olvidaste tu contraseña?</a>
                        </div>

                        <!-- Login Button -->
                        <button type="submit"
                            class="w-full py-3 px-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
                            <span id="loginButtonText" class="flex items-center justify-center">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"></path>
                                </svg>
                                Iniciar Sesión
                            </span>
                            <div id="loginSpinner" class="hidden animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"></div>
                        </button>
                    </form>

                    <!-- Error Message -->
                    <div id="loginError" class="hidden mt-4 p-4 bg-red-50 border-l-4 border-red-400 text-red-700 rounded-lg">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                                </svg>
                            </div>
                            <div class="ml-3">
                                <p class="text-sm font-medium" id="loginErrorText"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Column - Promotional Content -->
        <div class="flex-1 relative overflow-hidden bg-gradient-to-br from-blue-50 to-slate-50">
            <!-- Abstract Images -->
            <div class="absolute inset-0">
                <!-- Image 1: Curved line with three spheres (top right) -->
                <div class="absolute top-8 right-8 w-80 h-80 animate-float">
                    <svg viewBox="0 0 200 200" class="w-full h-full">
                        <!-- Curved line -->
                        <path d="M 20 160 Q 60 40 180 20" stroke="#60A5FA" stroke-width="2" fill="none" opacity="0.8">
                            <animate attributeName="stroke-dasharray" values="0,1000;1000,0;0,1000" dur="4s" repeatCount="indefinite"/>
                        </path>
                        <!-- Three spheres -->
                        <circle cx="20" cy="160" r="12" fill="#1E40AF" opacity="0.9" class="animate-pulse"/>
                        <circle cx="30" cy="160" r="12" fill="#FFFFFF" opacity="0.9" class="animate-pulse"/>
                        <circle cx="40" cy="160" r="12" fill="#3B82F6" opacity="0.9" class="animate-pulse"/>
                    </svg>
                </div>
                
                <!-- Image 2: Six spheres with orbital lines (top left) -->
                <div class="absolute top-16 left-8 w-72 h-72 animate-float-delay">
                    <svg viewBox="0 0 200 200" class="w-full h-full">
                        <!-- Orbital lines -->
                        <ellipse cx="100" cy="100" rx="60" ry="40" stroke="#A78BFA" stroke-width="1.5" fill="none" opacity="0.6">
                            <animateTransform attributeName="transform" type="rotate" values="0 100 100;360 100 100" dur="8s" repeatCount="indefinite"/>
                        </ellipse>
                        <ellipse cx="100" cy="100" rx="80" ry="50" stroke="#A78BFA" stroke-width="1" fill="none" opacity="0.4">
                            <animateTransform attributeName="transform" type="rotate" values="360 100 100;0 100 100" dur="12s" repeatCount="indefinite"/>
                        </ellipse>
                        <!-- Six spheres -->
                        <circle cx="100" cy="60" r="8" fill="#3B82F6" opacity="0.9"/>
                        <circle cx="140" cy="100" r="8" fill="#FFFFFF" opacity="0.9"/>
                        <circle cx="100" cy="140" r="8" fill="#3B82F6" opacity="0.9"/>
                        <circle cx="60" cy="100" r="8" fill="#FFFFFF" opacity="0.9"/>
                        <circle cx="120" cy="80" r="6" fill="#3B82F6" opacity="0.8"/>
                        <circle cx="80" cy="120" r="6" fill="#FFFFFF" opacity="0.8"/>
                    </svg>
                </div>
                
                <!-- Image 3: Central sphere with orbiting spheres (center) -->
                <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 animate-float">
                    <svg viewBox="0 0 200 200" class="w-full h-full">
                        <!-- Central sphere -->
                        <circle cx="100" cy="100" r="20" fill="#1E40AF" opacity="0.9">
                            <animate attributeName="r" values="18;22;18" dur="3s" repeatCount="indefinite"/>
                        </circle>
                        <!-- Orbiting spheres -->
                        <circle cx="100" cy="60" r="8" fill="#1E40AF" opacity="0.8">
                            <animateTransform attributeName="transform" type="rotate" values="0 100 100;360 100 100" dur="6s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="140" cy="100" r="8" fill="#FFFFFF" opacity="0.8">
                            <animateTransform attributeName="transform" type="rotate" values="0 100 100;360 100 100" dur="6s" repeatCount="indefinite"/>
                        </circle>
                        <!-- Orbital lines -->
                        <path d="M 100 60 A 40 40 0 1 1 100 60" stroke="#FFFFFF" stroke-width="1" fill="none" opacity="0.6">
                            <animate attributeName="stroke-dasharray" values="0,250;250,0" dur="3s" repeatCount="indefinite"/>
                        </path>
                        <path d="M 140 100 A 40 40 0 1 1 140 100" stroke="#FFFFFF" stroke-width="1" fill="none" opacity="0.6">
                            <animate attributeName="stroke-dasharray" values="250,0;0,250" dur="3s" repeatCount="indefinite"/>
                        </path>
                    </svg>
                </div>
                
                <!-- Additional floating elements for depth -->
                <div class="absolute bottom-16 right-16 w-48 h-48 animate-float-delay">
                    <svg viewBox="0 0 100 100" class="w-full h-full">
                        <circle cx="50" cy="50" r="15" fill="#3B82F6" opacity="0.6">
                            <animate attributeName="opacity" values="0.3;0.8;0.3" dur="4s" repeatCount="indefinite"/>
                        </circle>
                        <circle cx="30" cy="30" r="8" fill="#FFFFFF" opacity="0.5">
                            <animate attributeName="opacity" values="0.2;0.7;0.2" dur="5s" repeatCount="indefinite"/>
                        </circle>
                    </svg>
                </div>
            </div>

            <!-- Dotted Pattern -->
            <div class="absolute top-1/4 right-1/4 w-16 h-16 opacity-30">
                <div class="grid grid-cols-4 gap-1 h-full">
                    <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                    <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                    <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                    <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                    <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                    <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                    <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                    <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                    <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                    <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                    <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                    <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                    <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                    <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                    <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                    <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                </div>
            </div>

            <!-- Promotional Text -->
            <div class="absolute inset-0 flex items-center justify-center">
                <div class="text-center px-8">
                    <h2 class="text-5xl font-bold text-black leading-tight animate-fade-in-up">
                        ¡Bienvenido de vuelta!<br>
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-600 to-blue-600 animate-gradient-x">
                            Crea tu carta de responsabilidad<br>
                            en minutos
                        </span>
                    </h2>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" class="min-h-screen bg-gray-50 hidden">
        <!-- Header -->
        <header class="bg-white shadow-lg border-b border-gray-200 sticky top-0 z-40">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-20">
                    <!-- Logo Section -->
                    <div class="flex items-center">
                        <!-- Mobile menu button -->
                        <button id="mobileMenuButton" class="lg:hidden p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all duration-200 mr-2">
                            <i class="fas fa-bars text-lg"></i>
                        </button>
                        
                        <div class="flex-shrink-0 flex items-center">
                            <div class="w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center mr-4">
                                <i class="fas fa-shield-alt text-white text-lg"></i>
                            </div>
                            <div>
                                <h1 class="text-2xl font-bold text-gray-900">TechSupport</h1>
                                <p class="text-xs text-gray-500 -mt-1">Asset Management</p>
                            </div>
                        </div>
                        
                        <!-- Navigation -->
                        <nav class="hidden lg:ml-12 lg:flex lg:space-x-1">
                            <a href="#" onclick="showSection('dashboard-section')" class="nav-link text-gray-600 hover:text-gray-900 hover:bg-gray-50 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center">
                                <i class="fas fa-tachometer-alt mr-2 text-sm"></i>
                                Dashboard
                            </a>
                            <a href="#" onclick="showSection('audit-section')" class="nav-link text-gray-600 hover:text-gray-900 hover:bg-gray-50 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center">
                                <i class="fas fa-clipboard-list mr-2 text-sm"></i>
                                Auditoría
                            </a>
                            
                            <!-- Cartas de Responsabilidad Dropdown -->
                            <div class="relative">
                                <button id="responsibilityDropdownButton" class="nav-link text-gray-600 hover:text-gray-900 hover:bg-gray-50 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center group">
                                    <i class="fas fa-file-contract mr-2 text-sm"></i>
                                    Cartas de Responsabilidad
                                    <i class="fas fa-chevron-down ml-2 text-xs transition-transform duration-200 group-hover:rotate-180"></i>
                                </button>
                                <div id="responsibilityDropdown" class="hidden absolute top-full left-0 mt-2 w-56 bg-white rounded-xl shadow-xl z-50 border border-gray-200 overflow-hidden">
                                    <div class="py-2">
                                        <div class="px-4 py-3 border-b border-gray-200">
                                            <p class="text-sm font-medium text-gray-900">Cartas de Responsabilidad</p>
                                            <p class="text-xs text-gray-500">Procesos de empleados</p>
                                        </div>
                                        <a href="#" onclick="createOnboardingOverlay()" class="block px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200 flex items-center">
                                            <i class="fas fa-user-plus mr-3 text-gray-400"></i>
                                            Onboarding
                                        </a>
                                        <a href="#" onclick="createOffboardingOverlay()" class="block px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200 flex items-center">
                                            <i class="fas fa-user-minus mr-3 text-gray-400"></i>
                                            Offboarding
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    
                    <!-- Right Section -->
                    <div class="flex items-center space-x-2">
                        <!-- Search Bar -->
                        <div class="hidden md:block relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-search text-gray-400 text-sm"></i>
                            </div>
                            <input type="text" placeholder="Buscar..." class="w-64 pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="flex items-center space-x-1">
                            <!-- Theme Toggle -->
                            <button id="themeToggle" class="p-2.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all duration-200" title="Cambiar tema">
                                <i class="fas fa-moon text-lg"></i>
                            </button>
                            
                            <!-- Preferences Button -->
                            <button onclick="showPreferencesModal()" class="p-2.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all duration-200" title="Preferencias">
                                <i class="fas fa-cog text-lg"></i>
                            </button>
                            
                            <!-- Notifications -->
                            <div class="relative">
                                <button id="notificationButton" class="p-2.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-all duration-200 relative" title="Notificaciones">
                                    <i class="fas fa-bell text-lg"></i>
                                    <span id="notificationBadge" class="hidden absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium">0</span>
                                </button>
                                <div id="notificationDropdown" class="hidden absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-xl z-50 border border-gray-200 overflow-hidden">
                                    <div class="p-4 border-b border-gray-200">
                                        <div class="flex items-center justify-between">
                                            <h3 class="text-lg font-semibold text-gray-900">Notificaciones</h3>
                                            <button onclick="clearNotifications()" class="text-sm text-blue-600 hover:text-blue-800">Limpiar todo</button>
                                        </div>
                                    </div>
                                    <div id="notificationList" class="max-h-96 overflow-y-auto">
                                        <!-- Notifications will be populated here -->
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Test Button (only in development) -->
                            <button onclick="testDashboard()" class="hidden bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-all duration-200 text-sm font-medium shadow-sm">
                                <i class="fas fa-vial mr-2"></i>
                                Test
                            </button>
                            
                            <!-- User Menu -->
                            <div class="relative">
                                <button id="userMenuButton" class="flex items-center text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 hover:bg-gray-50 transition-all duration-200 px-3 py-2">
                                    <div class="user-avatar">
                                        <span id="userInitials"></span>
                                    </div>
                                    <div class="ml-3 text-left">
                                        <span id="userName" class="text-gray-700 text-sm font-medium block"></span>
                                        <span class="text-xs text-gray-500">Administrador</span>
                                    </div>
                                    <i class="fas fa-chevron-down ml-2 text-gray-400 text-xs"></i>
                                </button>
                                <div id="userDropdown" class="hidden absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl z-50 border border-gray-200 overflow-hidden">
                                    <div class="py-2">
                                        <div class="px-4 py-3 border-b border-gray-200">
                                            <p class="text-sm font-medium text-gray-900" id="userFullName">Usuario</p>
                                            <p class="text-xs text-gray-500" id="userEmail">usuario@empresa.com</p>
                                        </div>
                                        <a href="#" onclick="showSection('profile-section')" class="block px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200 flex items-center">
                                            <i class="fas fa-user mr-3 text-gray-400"></i>
                                            Mi Perfil
                                        </a>
                                        <a href="#" onclick="changePassword()" class="block px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200 flex items-center">
                                            <i class="fas fa-key mr-3 text-gray-400"></i>
                                            Cambiar Contraseña
                                        </a>
                                        <div id="adminSection" class="hidden">
                                            <hr class="my-2">
                                            <a href="javascript:void(0)" onclick="window.abrirGestionUsuarios(); return false;" class="block px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors duration-200 flex items-center">
                                                <i class="fas fa-users mr-3 text-gray-400"></i>
                                                Gestión de Usuarios
                                            </a>
                                        </div>
                                        <hr class="my-2">
                                        <a href="#" onclick="logout()" class="block px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors duration-200 flex items-center">
                                            <i class="fas fa-sign-out-alt mr-3"></i>
                                            Cerrar Sesión
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Mobile Menu -->
        <div id="mobileMenu" class="hidden lg:hidden bg-white border-b border-gray-200">
            <div class="px-4 py-3 space-y-2">
                <a href="#" onclick="showSection('dashboard-section')" class="block px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg text-sm font-medium flex items-center">
                    <i class="fas fa-tachometer-alt mr-3 text-sm"></i>
                    Dashboard
                </a>
                <a href="#" onclick="showSection('audit-section')" class="block px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg text-sm font-medium flex items-center">
                    <i class="fas fa-clipboard-list mr-3 text-sm"></i>
                    Auditoría
                </a>
                <div class="border-t border-gray-200 pt-2">
                    <div class="px-3 py-2 bg-gray-50 rounded-lg mb-2">
                        <p class="text-sm font-medium text-gray-900">Cartas de Responsabilidad</p>
                        <p class="text-xs text-gray-500">Procesos de empleados</p>
                    </div>
                    <a href="#" onclick="createOnboardingOverlay()" class="block px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg text-sm font-medium flex items-center">
                        <i class="fas fa-user-plus mr-3 text-gray-400"></i>
                        Onboarding
                    </a>
                    <a href="#" onclick="createOffboardingOverlay()" class="block px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg text-sm font-medium flex items-center">
                        <i class="fas fa-user-minus mr-3 text-gray-400"></i>
                        Offboarding
                    </a>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
            <!-- Dashboard Section -->
            <div id="dashboard-section" class="section hidden">
                <div class="dashboard-container">
                    <!-- Header -->
                    <div class="section-spacing">
                        <h1 class="text-3xl font-bold text-gray-900 mb-2">Dashboard</h1>
                        <p class="text-gray-600">Resumen de actividades y estadísticas del sistema</p>
                    </div>

                    <!-- Stats Cards -->
                    <div class="section-spacing">
                        <h2 class="text-xl font-semibold text-gray-900 mb-4">Estadísticas Generales</h2>
                        <div class="stats-grid">
                    <div class="bg-white rounded-lg shadow card-shadow compact-card">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <div class="w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center">
                                    <i class="fas fa-users text-white text-sm"></i>
                                </div>
                            </div>
                            <div class="ml-4 w-0 flex-1">
                                <dl>
                                    <dt class="text-sm font-medium text-gray-500 truncate">Total Usuarios</dt>
                                    <dd id="totalUsers" class="text-2xl font-bold text-gray-900">-</dd>
                                    <dd id="totalUsersSource" class="text-xs text-gray-400 truncate" title="Fuente de datos">JumpCloud</dd>
                                </dl>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow card-shadow compact-card">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <div class="w-8 h-8 bg-green-500 rounded-md flex items-center justify-center">
                                    <i class="fas fa-laptop text-white text-sm"></i>
                                </div>
                            </div>
                            <div class="ml-4 w-0 flex-1">
                                <dl>
                                    <dt class="text-sm font-medium text-gray-500 truncate">Assets Disponibles</dt>
                                    <dd id="availableAssets" class="text-2xl font-bold text-gray-900">-</dd>
                                </dl>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow card-shadow compact-card">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <div class="w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center">
                                    <i class="fas fa-clipboard-check text-white text-sm"></i>
                                </div>
                            </div>
                            <div class="ml-4 w-0 flex-1">
                                <dl>
                                    <dt class="text-sm font-medium text-gray-500 truncate">Assets Asignados</dt>
                                    <dd id="assignedAssets" class="text-2xl font-bold text-gray-900">-</dd>
                                    <dd id="assignedAssetsSource" class="text-xs text-gray-400 truncate" title="Fuente de datos">JumpCloud</dd>
                                </dl>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow card-shadow compact-card">
                        <div class="flex items-center">
                            <div class="flex-shrink-0">
                                <div class="w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center">
                                    <i class="fas fa-chart-line text-white text-sm"></i>
                                </div>
                            </div>
                            <div class="ml-4 w-0 flex-1">
                                <dl>
                                    <dt class="text-sm font-medium text-gray-500 truncate">Actividad Hoy</dt>
                                    <dd id="todayActivity" class="text-2xl font-bold text-gray-900">-</dd>
                                </dl>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Row -->
                <div class="section-spacing">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">Análisis y Actividad</h2>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Chart Container -->
                        <div class="chart-container">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">Usuarios por Ubicación</h3>
                            <div class="chart-height">
                                <canvas id="locationChart" width="400" height="200"></canvas>
                            </div>
                        </div>
                        
                        <!-- Activity Container -->
                        <div class="activity-container">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">Actividad Reciente</h3>
                            <div id="recentActivity" class="space-y-3">
                                <!-- Recent activity will be populated here -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- New Hires Card -->
                    <div class="mt-6">
                        <div class="bg-white rounded-lg shadow card-shadow p-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-medium text-gray-900">Nuevos Ingresos</h3>
                                <button onclick="showCreateResponsibilityLetterModal()" class="bg-green-600 text-white px-3 py-1 rounded-md hover:bg-green-700 transition duration-200 text-sm">
                                    <i class="fas fa-file-alt mr-1"></i>Crear Carta
                                </button>
                            </div>
                            <div id="newHiresList" class="space-y-3 max-h-64 overflow-y-auto">
                                <!-- New hires will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Assignments -->
                <div class="bg-white rounded-lg shadow card-shadow">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h3 class="text-lg font-medium text-gray-900">Asignaciones Recientes</h3>
                    </div>
                    <div class="p-6">
                        <div id="recentAssignments" class="space-y-4">
                            <!-- Recent assignments will be populated here -->
                        </div>
                    </div>
                </div>
            </div>


            <!-- Responsibility Letters Section -->
            <div id="responsibility-section" class="section">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                    <!-- Header -->
                    <div class="mb-8">
                        <h1 class="text-3xl font-bold text-gray-900">Cartas de Responsabilidad</h1>
                        <p class="mt-2 text-gray-600">Gestiona las cartas de responsabilidad de activos para empleados</p>
                    </div>

                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-5 gap-6 mb-8">
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-file-alt text-blue-600"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Total Cartas</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="totalLetters">-</p>
                                </div>
                    </div>
                </div>

                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-clock text-yellow-600"></i>
                            </div>
                        </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Pendientes</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="pendingLetters">-</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-check-circle text-green-600"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Enviadas</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="sentLetters">-</p>
                            </div>
                        </div>
                    </div>

                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-file-signature text-red-600"></i>
                            </div>
                        </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Faltantes por firmar</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="missingSignatureLetters">-</p>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-calendar-check text-indigo-600"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Enviadas este mes</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="sentThisMonthLetters">-</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Search and Filters -->
                    <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                        <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4">
                            <!-- Search -->
                            <div class="flex-1">
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <i class="fas fa-search text-gray-400"></i>
                                    </div>
                                    <input type="text" id="letterSearch" placeholder="Buscar por empleado, activo o número de carta..." 
                                           class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                </div>

                            <!-- Filters -->
                            <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4">
                                <select id="statusFilter" class="block w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="">Todos los estados</option>
                                    <option value="pending">Pendientes</option>
                                    <option value="sent">Enviadas</option>
                                    <option value="signed">Firmadas</option>
                                </select>
                                
                                <select id="locationFilter" class="block w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="">Todas las ubicaciones</option>
                                    <option value="MX">México</option>
                                    <option value="CL">Chile</option>
                                    <option value="REMOTO">Remoto</option>
                                </select>
                                
                                <select id="assetTypeFilter" class="block w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="">Todos los tipos</option>
                                    <option value="Laptop">Laptop</option>
                                    <option value="Monitor">Monitor</option>
                                    <option value="Phone">Teléfono</option>
                                    <option value="Tablet">Tablet</option>
                                    <option value="Other">Otro</option>
                                </select>
                                
                                <button onclick="responsibilityManager.clearFilters()" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                                    <i class="fas fa-times mr-1"></i>
                                    Limpiar
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Letters Table -->
                    <div class="bg-white shadow-sm rounded-lg overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                            <div>
                                <h2 class="text-lg font-semibold text-gray-900">Cartas de Responsabilidad</h2>
                                <p class="text-sm text-gray-500 mt-1" id="lettersCount">Mostrando 0 cartas</p>
                            </div>
                            <button onclick="openCreateLetterModal()" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200">
                                <i class="fas fa-plus mr-2"></i>
                                Nueva Carta
                            </button>
                        </div>
                        
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="responsibilityManager.sortBy('employee_name')">
                                            Empleado <i class="fas fa-sort ml-1"></i>
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="responsibilityManager.sortBy('asset_name')">
                                            Activo <i class="fas fa-sort ml-1"></i>
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="responsibilityManager.sortBy('asset_type')">
                                            Tipo <i class="fas fa-sort ml-1"></i>
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="responsibilityManager.sortBy('status')">
                                            Estado <i class="fas fa-sort ml-1"></i>
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="responsibilityManager.sortBy('created_at')">
                                            Creada <i class="fas fa-sort ml-1"></i>
                                        </th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
                                        </tr>
                                    </thead>
                                <tbody id="lettersTableBody" class="bg-white divide-y divide-gray-200">
                                    <!-- Letters will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        
                        <!-- Pagination -->
                        <div id="lettersPagination" class="px-6 py-4 border-t border-gray-200 flex items-center justify-between">
                            <div class="flex items-center text-sm text-gray-700">
                                <span id="lettersPaginationInfo">Mostrando 0 de 0 cartas</span>
                        </div>
                            <div class="flex items-center space-x-2">
                                <button id="lettersPrevPage" onclick="responsibilityManager.previousPage()" disabled class="px-3 py-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <div id="lettersPageNumbers" class="flex space-x-1">
                                    <!-- Page numbers will be populated here -->
                                </div>
                                <button id="lettersNextPage" onclick="responsibilityManager.nextPage()" disabled class="px-3 py-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Secure Onboarding Automation Section (removed per request) -->
            <div id="secure-onboarding-section" class="section hidden" style="display:none;">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                    <!-- Header -->
                    <div class="mb-8">
                        <h1 class="text-3xl font-bold text-gray-900">Automatización de Onboarding Seguro</h1>
                        <p class="mt-2 text-gray-600">Gestión segura de usuarios desde HiBob y activos desde Snipe-IT</p>
                        <div class="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                            <div class="flex">
                                <div class="flex-shrink-0">
                                    <i class="fas fa-shield-alt text-blue-400"></i>
                                </div>
                                <div class="ml-3">
                                    <h3 class="text-sm font-medium text-blue-800">Arquitectura de Proxy Seguro</h3>
                                    <div class="mt-2 text-sm text-blue-700">
                                        <p>✅ Sin credenciales en el frontend</p>
                                        <p>✅ Todas las llamadas API van a través del backend proxy</p>
                                        <p>✅ Integración segura con HiBob y Snipe-IT</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-users text-blue-600"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Total Usuarios</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="totalUsuariosProxy">-</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-clock text-yellow-600"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Pendientes</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="pendientesProxy">-</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-check-circle text-green-600"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Firmados</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="firmadosProxy">-</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-laptop text-purple-600"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Total Activos</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="totalActivosProxy">-</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Controls -->
                    <div class="mb-6 flex flex-col sm:flex-row sm:items-center sm:justify-between">
                        <div class="flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4">
                            <button onclick="window.secureOnboardingProxy.cargarUsuarios()" 
                                    class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200">
                                <i class="fas fa-sync-alt mr-2"></i>
                                Recargar desde Proxy
                            </button>
                            <div class="text-sm text-gray-500">
                                <span id="usuariosCount">Cargando usuarios...</span>
                            </div>
                        </div>
                    </div>

                    <!-- Users Table -->
                    <div class="bg-white shadow-sm rounded-lg overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h2 class="text-lg font-semibold text-gray-900">Usuarios con Activos Asignados</h2>
                            <p class="text-sm text-gray-500 mt-1">Datos combinados desde HiBob y Snipe-IT</p>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Usuario
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Posición
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Ubicación
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Activos
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Estado Documento
                                        </th>
                                        <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Acciones
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="usuariosTableBody" class="bg-white divide-y divide-gray-200">
                                    <!-- Usuarios se cargarán aquí dinámicamente -->
                                    <tr>
                                        <td colspan="6" class="px-6 py-12 text-center">
                                            <div class="flex flex-col items-center">
                                                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-4"></div>
                                                <p class="text-sm text-gray-500">Conectando con proxy backend seguro...</p>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Security Info -->
                    <div class="mt-8 p-4 bg-gray-50 border border-gray-200 rounded-lg">
                        <h3 class="text-sm font-medium text-gray-900 mb-2">🔒 Información de Seguridad</h3>
                        <div class="text-sm text-gray-600 space-y-1">
                            <p><strong>Proxy Backend:</strong> http://localhost:3001/api/users</p>
                            <p><strong>Webhook eSign:</strong> http://localhost:3001/api/disparar-esign</p>
                            <p><strong>Credenciales:</strong> Gestionadas exclusivamente en el backend proxy</p>
                            <p><strong>Frontend:</strong> Sin tokens, claves o credenciales de API</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Offboarding Section -->
            <div id="offboarding-section" class="section hidden">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                    <!-- Header -->
                    <div class="mb-8">
                        <h1 class="text-3xl font-bold text-gray-900">Procesos de Offboarding</h1>
                        <p class="mt-2 text-gray-600">Gestiona el proceso de salida de empleados</p>
                    </div>

                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-user-minus text-blue-600"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Total Procesos</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="totalOffboarding">-</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-clock text-yellow-600"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">En Progreso</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="inProgressOffboarding">-</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-check-circle text-green-600"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Completados</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="completedOffboarding">-</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-calendar text-red-600"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Esta Semana</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="thisWeekOffboarding">-</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Search and Filters -->
                    <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                        <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4">
                            <!-- Search -->
                            <div class="flex-1">
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <i class="fas fa-search text-gray-400"></i>
                                    </div>
                                    <input type="text" id="offboardingSearch" placeholder="Buscar por empleado, posición o departamento..." 
                                           class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                                </div>
                            </div>
                            
                            <!-- Filters -->
                            <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4">
                                <select id="statusOffboardingFilter" class="block w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="">Todos los estados</option>
                                    <option value="pending">Pendiente</option>
                                    <option value="in_progress">En Progreso</option>
                                    <option value="completed">Completado</option>
                                    <option value="cancelled">Cancelado</option>
                                </select>
                                
                                <select id="locationOffboardingFilter" class="block w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="">Todas las ubicaciones</option>
                                    <option value="MX">México</option>
                                    <option value="CL">Chile</option>
                                    <option value="REMOTO">Remoto</option>
                                </select>
                                
                                <select id="departmentOffboardingFilter" class="block w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="">Todos los departamentos</option>
                                    <option value="IT">IT</option>
                                    <option value="HR">Recursos Humanos</option>
                                    <option value="Finance">Finanzas</option>
                                    <option value="Operations">Operaciones</option>
                                    <option value="Sales">Ventas</option>
                                </select>
                                
                                <button onclick="offboardingManager.clearFilters()" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                                    <i class="fas fa-times mr-1"></i>
                                    Limpiar
                        </button>
                            </div>
                    </div>
                </div>

                    <!-- Offboarding Table -->
                    <div class="bg-white shadow-sm rounded-lg overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                            <div>
                                <h2 class="text-lg font-semibold text-gray-900">Procesos de Offboarding</h2>
                                <p class="text-sm text-gray-500 mt-1" id="offboardingCount">Mostrando 0 procesos</p>
                    </div>
                            <button onclick="openCreateOffboardingModal()" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200">
                                <i class="fas fa-plus mr-2"></i>
                                Nuevo Proceso
                            </button>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="offboardingManager.sortBy('employee_name')">
                                            Empleado <i class="fas fa-sort ml-1"></i>
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="offboardingManager.sortBy('position')">
                                            Posición <i class="fas fa-sort ml-1"></i>
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="offboardingManager.sortBy('department')">
                                            Departamento <i class="fas fa-sort ml-1"></i>
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="offboardingManager.sortBy('status')">
                                            Estado <i class="fas fa-sort ml-1"></i>
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="offboardingManager.sortBy('end_date')">
                                            Fecha Salida <i class="fas fa-sort ml-1"></i>
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Progreso</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="offboardingTableBody" class="bg-white divide-y divide-gray-200">
                                    <!-- Offboarding processes will be populated here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Pagination -->
                        <div id="offboardingPagination" class="px-6 py-4 border-t border-gray-200 flex items-center justify-between">
                            <div class="flex items-center text-sm text-gray-700">
                                <span id="offboardingPaginationInfo">Mostrando 0 de 0 procesos</span>
                        </div>
                            <div class="flex items-center space-x-2">
                                <button id="offboardingPrevPage" onclick="offboardingManager.previousPage()" disabled class="px-3 py-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <div id="offboardingPageNumbers" class="flex space-x-1">
                                    <!-- Page numbers will be populated here -->
                                </div>
                                <button id="offboardingNextPage" onclick="offboardingManager.nextPage()" disabled class="px-3 py-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Jira Employees Section -->
            <div id="jira-employees-section" class="section hidden">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                    <!-- Header -->
                    <div class="mb-8">
                        <h1 class="text-3xl font-bold text-gray-900">Empleados de Jira</h1>
                        <p class="mt-2 text-gray-600">Empleados pendientes de offboarding desde Jira</p>
                    </div>

                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-users text-blue-600"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Total Empleados</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="totalJiraEmployees">-</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-clock text-yellow-600"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Pendientes</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="pendingJiraEmployees">-</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Jira Employees Table -->
                    <div class="bg-white shadow-sm rounded-lg overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                            <div>
                                <h2 class="text-lg font-semibold text-gray-900">Empleados Pendientes de Offboarding</h2>
                                <p class="text-sm text-gray-500 mt-1">Empleados que requieren carta de salida</p>
                            </div>
                            <button onclick="loadJiraEmployees()" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200">
                                <i class="fas fa-sync-alt mr-2"></i>
                                Actualizar
                            </button>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Empleado
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Posición
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Departamento
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Razón
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Último Día
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Ticket Jira
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                            Acciones
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="jiraEmployeesTableBody" class="bg-white divide-y divide-gray-200">
                                    <!-- Jira employees will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Users Management Section -->
            <div id="users-section" class="section hidden">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                    <!-- Header -->
                    <div class="mb-8">
                        <h1 class="text-3xl font-bold text-gray-900">Gestión de Usuarios</h1>
                        <p class="mt-2 text-gray-600">Administra usuarios, roles y permisos del sistema</p>
                    </div>

                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-users text-blue-600"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Total Usuarios</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="totalUsers">-</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-user-check text-green-600"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Usuarios Activos</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="activeUsers">-</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-crown text-purple-600"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Administradores</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="adminUsers">-</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <div class="flex items-center">
                                <div class="flex-shrink-0">
                                    <div class="w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-search text-yellow-600"></i>
                                    </div>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-500">Auditores</p>
                                    <p class="text-2xl font-semibold text-gray-900" id="auditorUsers">-</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Search and Filters -->
                    <div class="bg-white rounded-lg shadow-sm p-6 mb-6">
                        <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4">
                            <!-- Search -->
                            <div class="flex-1">
                                <div class="relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <i class="fas fa-search text-gray-400"></i>
                                    </div>
                                    <input type="text" id="userSearch" placeholder="Buscar usuarios por nombre, email o username..." 
                                           class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                                </div>
                            </div>
                            
                            <!-- Filters -->
                            <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4">
                                <select id="roleFilter" class="block w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="">Todos los roles</option>
                                    <option value="admin">Administradores</option>
                                    <option value="auditor">Auditores</option>
                                </select>
                                
                                <select id="statusFilter" class="block w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="">Todos los estados</option>
                                    <option value="true">Activos</option>
                                    <option value="false">Inactivos</option>
                                </select>
                                
                                <select id="locationFilter" class="block w-full sm:w-auto px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                                    <option value="">Todas las ubicaciones</option>
                                    <option value="MX">México</option>
                                    <option value="CL">Chile</option>
                                    <option value="REMOTO">Remoto</option>
                                </select>
                                
                                <button onclick="userManager.clearFilters()" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500">
                                    <i class="fas fa-times mr-1"></i>
                                    Limpiar
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Users Table -->
                    <div class="bg-white shadow-sm rounded-lg overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                            <div>
                                <h2 class="text-lg font-semibold text-gray-900">Usuarios del Sistema</h2>
                                <p class="text-sm text-gray-500 mt-1" id="usersCount">Mostrando 0 usuarios</p>
                            </div>
                            <div class="flex space-x-2">
                                <button onclick="window.testUsersPage()" class="inline-flex items-center px-4 py-2 border border-blue-300 text-sm font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200">
                                    <i class="fas fa-vial mr-2"></i>
                                    Test
                                </button>
                                <button onclick="loadUsers()" class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200">
                                    <i class="fas fa-sync-alt mr-2"></i>
                                    Recargar
                                </button>
                                <button onclick="openCreateUserModal()" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200">
                                    <i class="fas fa-plus mr-2"></i>
                                    Nuevo Usuario
                                </button>
                            </div>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="userManager.sortBy('full_name')">
                                            Usuario <i class="fas fa-sort ml-1"></i>
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="userManager.sortBy('email')">
                                            Email <i class="fas fa-sort ml-1"></i>
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="userManager.sortBy('role')">
                                            Rol <i class="fas fa-sort ml-1"></i>
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="userManager.sortBy('location')">
                                            Ubicación <i class="fas fa-sort ml-1"></i>
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="userManager.sortBy('is_active')">
                                            Estado <i class="fas fa-sort ml-1"></i>
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100" onclick="userManager.sortBy('created_at')">
                                            Creado <i class="fas fa-sort ml-1"></i>
                                        </th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
                                    </tr>
                                </thead>
                                <tbody id="usersTableBody" class="bg-white divide-y divide-gray-200">
                                    <!-- Users will be populated here -->
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Pagination -->
                        <div id="usersPagination" class="px-6 py-4 border-t border-gray-200 flex items-center justify-between">
                            <div class="flex items-center text-sm text-gray-700">
                                <span id="paginationInfo">Mostrando 0 de 0 usuarios</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button id="prevPage" onclick="userManager.previousPage()" disabled class="px-3 py-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <div id="pageNumbers" class="flex space-x-1">
                                    <!-- Page numbers will be populated here -->
                                </div>
                                <button id="nextPage" onclick="userManager.nextPage()" disabled class="px-3 py-1 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- Create Asset Modal -->
    <div id="createAssetModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <h3 class="text-lg font-medium text-gray-900 mb-4">Crear Nuevo Asset</h3>
                <form id="createAssetForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Asset Tag</label>
                        <input type="text" id="assetTag" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nombre</label>
                        <input type="text" id="assetName" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Categoría</label>
                        <select id="assetCategory" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                            <option value="">Seleccionar categoría</option>
                            <option value="Laptop">Laptop</option>
                            <option value="Monitor">Monitor</option>
                            <option value="Phone">Teléfono</option>
                            <option value="Tablet">Tablet</option>
                            <option value="Other">Otro</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Ubicación</label>
                        <select id="assetLocation" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                            <option value="">Seleccionar ubicación</option>
                            <option value="MX">México</option>
                            <option value="CL">Chile</option>
                            <option value="REMOTO">Remoto</option>
                        </select>
                    </div>
                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" onclick="closeCreateAssetModal()" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300">
                            Cancelar
                        </button>
                        <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700">
                            Crear Asset
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Create Responsibility Letter Modal -->
    <div id="createResponsibilityLetterModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-10 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Crear Carta de Responsabilidad</h3>
                    <button onclick="closeCreateResponsibilityLetterModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <form id="createResponsibilityLetterForm" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Nombre del Empleado *</label>
                            <input type="text" id="employeeName" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ID de Empleado</label>
                            <input type="text" id="employeeId" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Posición *</label>
                            <input type="text" id="position" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Departamento *</label>
                            <input type="text" id="department" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ubicación *</label>
                            <select id="location" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                                <option value="">Seleccionar ubicación</option>
                                <option value="MX">México</option>
                                <option value="CL">Chile</option>
                                <option value="REMOTO">Remoto</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Fecha de Inicio *</label>
                            <input type="date" id="startDate" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Assets Asignados</label>
                        <div id="assetsList" class="space-y-2 max-h-32 overflow-y-auto border border-gray-300 rounded-md p-3">
                            <!-- Assets will be populated here -->
                        </div>
                        <button type="button" onclick="addAssetToLetter()" class="mt-2 text-sm text-primary-600 hover:text-primary-800">
                            <i class="fas fa-plus mr-1"></i>Agregar Asset
                        </button>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Términos Adicionales</label>
                        <textarea id="additionalTerms" rows="3" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm" placeholder="Términos específicos adicionales..."></textarea>
                    </div>
                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" onclick="closeCreateResponsibilityLetterModal()" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300">
                            Cancelar
                        </button>
                        <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700">
                            <i class="fas fa-file-alt mr-2"></i>Generar Carta
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Assign Asset Modal -->
    <div id="assignAssetModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <h3 class="text-lg font-medium text-gray-900 mb-4">Asignar Asset</h3>
                <form id="assignAssetForm" class="space-y-4">
                    <input type="hidden" id="assignAssetId">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Asset</label>
                        <input type="text" id="assignAssetName" readonly class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm bg-gray-50">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Asignar a</label>
                        <select id="assignUserId" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                            <option value="">Seleccionar usuario</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Notas</label>
                        <textarea id="assignNotes" rows="3" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm"></textarea>
                    </div>
                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" onclick="closeAssignAssetModal()" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300">
                            Cancelar
                        </button>
                        <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700">
                            Asignar Asset
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Create Onboarding Modal -->
    <div id="createOnboardingModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-10 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Iniciar Proceso de Onboarding</h3>
                    <button onclick="closeCreateOnboardingModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <form id="createOnboardingForm" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Nombre del Empleado *</label>
                            <input type="text" id="onboardingEmployeeName" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">ID de Empleado</label>
                            <input type="text" id="onboardingEmployeeId" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                            <input type="email" id="onboardingEmail" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Posición *</label>
                            <input type="text" id="onboardingPosition" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Departamento *</label>
                            <input type="text" id="onboardingDepartment" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Ubicación *</label>
                            <select id="onboardingLocation" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                                <option value="">Seleccionar ubicación</option>
                                <option value="MX">México</option>
                                <option value="CL">Chile</option>
                                <option value="REMOTO">Remoto</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Fecha de Inicio *</label>
                            <input type="date" id="onboardingStartDate" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Manager</label>
                            <select id="onboardingManager" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                                <option value="">Seleccionar manager</option>
                            </select>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Plantilla de Onboarding</label>
                        <select id="onboardingTemplate" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                            <option value="">Seleccionar plantilla (opcional)</option>
                        </select>
                    </div>
                    <div id="templateSteps" class="space-y-2">
                        <!-- Template steps will be populated here -->
                    </div>
                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" onclick="closeCreateOnboardingModal()" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300">
                            Cancelar
                        </button>
                        <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700">
                            <i class="fas fa-play mr-2"></i>Iniciar Onboarding
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Create Offboarding Modal -->
    <div id="createOffboardingModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-10 mx-auto p-5 border w-11/12 max-w-2xl shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Iniciar Proceso de Offboarding</h3>
                    <button onclick="closeCreateOffboardingModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <form id="createOffboardingForm" class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Empleado *</label>
                            <select id="offboardingEmployee" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                                <option value="">Seleccionar empleado</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Último Día de Trabajo *</label>
                            <input type="date" id="offboardingLastDay" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Razón</label>
                            <select id="offboardingReason" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                                <option value="Resignation">Renuncia</option>
                                <option value="Termination">Terminación</option>
                                <option value="Retirement">Jubilación</option>
                                <option value="Other">Otro</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Días de Retención de Datos</label>
                            <input type="number" id="dataRetentionDays" value="30" min="1" max="365" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Plantilla de Offboarding</label>
                        <select id="offboardingTemplate" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                            <option value="">Seleccionar plantilla (opcional)</option>
                        </select>
                    </div>
                    <div id="offboardingTemplateSteps" class="space-y-2">
                        <!-- Template steps will be populated here -->
                    </div>
                    <div>
                        <label class="flex items-center">
                            <input type="checkbox" id="returnAssets" checked class="rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                            <span class="ml-2 text-sm text-gray-700">Devolver assets automáticamente</span>
                        </label>
                    </div>
                    <div id="employeeAssetsList" class="space-y-2">
                        <!-- Employee assets will be populated here -->
                    </div>
                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" onclick="closeCreateOffboardingModal()" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300">
                            Cancelar
                        </button>
                        <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700">
                            <i class="fas fa-play mr-2"></i>Iniciar Offboarding
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Preferences Modal -->
    <div id="preferencesModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-10 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Preferencias</h3>
                    <button onclick="closePreferencesModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Theme Settings -->
                    <div class="space-y-4">
                        <h4 class="text-md font-medium text-gray-900">Tema</h4>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Modo de Color</label>
                            <select id="themeSelect" class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                                <option value="light">Claro</option>
                                <option value="dark">Oscuro</option>
                                <option value="auto">Automático</option>
                            </select>
                        </div>
                    </div>

                    <!-- Notification Settings -->
                    <div class="space-y-4">
                        <h4 class="text-md font-medium text-gray-900">Notificaciones</h4>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" name="email" class="notification-toggle rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                                <span class="ml-2 text-sm text-gray-700">Notificaciones por email</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="push" class="notification-toggle rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                                <span class="ml-2 text-sm text-gray-700">Notificaciones push</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="dashboard" class="notification-toggle rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                                <span class="ml-2 text-sm text-gray-700">Notificaciones del dashboard</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="assets" class="notification-toggle rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                                <span class="ml-2 text-sm text-gray-700">Notificaciones de assets</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="audit" class="notification-toggle rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                                <span class="ml-2 text-sm text-gray-700">Notificaciones de auditoría</span>
                            </label>
                        </div>
                    </div>

                    <!-- Dashboard Layout -->
                    <div class="space-y-4">
                        <h4 class="text-md font-medium text-gray-900">Layout del Dashboard</h4>
                        <div class="space-y-2">
                            <button id="saveDashboardLayout" class="w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition duration-200">
                                <i class="fas fa-save mr-2"></i>Guardar Layout Actual
                            </button>
                            <button id="resetDashboardLayout" class="w-full bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition duration-200">
                                <i class="fas fa-undo mr-2"></i>Resetear Layout
                            </button>
                        </div>
                    </div>

                    <!-- Shortcuts -->
                    <div class="space-y-4">
                        <h4 class="text-md font-medium text-gray-900">Atajos de Teclado</h4>
                        <div id="shortcutsList" class="space-y-2">
                            <!-- Shortcuts will be populated here -->
                        </div>
                        <button onclick="showShortcuts()" class="w-full bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition duration-200">
                            <i class="fas fa-keyboard mr-2"></i>Ver Todos los Atajos
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Shortcuts Modal -->
    <div id="shortcutsModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-lg font-medium text-gray-900">Atajos de Teclado</h3>
                    <button onclick="closeShortcutsModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <div class="space-y-3">
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                        <kbd class="px-2 py-1 bg-gray-200 rounded text-sm font-mono">Ctrl+K</kbd>
                        <span class="text-sm text-gray-700">Enfocar búsqueda</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                        <kbd class="px-2 py-1 bg-gray-200 rounded text-sm font-mono">Ctrl+N</kbd>
                        <span class="text-sm text-gray-700">Nuevo asset</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                        <kbd class="px-2 py-1 bg-gray-200 rounded text-sm font-mono">Ctrl+A</kbd>
                        <span class="text-sm text-gray-700">Página de auditoría</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                        <kbd class="px-2 py-1 bg-gray-200 rounded text-sm font-mono">Ctrl+R</kbd>
                        <span class="text-sm text-gray-700">Página de cartas</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                        <kbd class="px-2 py-1 bg-gray-200 rounded text-sm font-mono">Ctrl+D</kbd>
                        <span class="text-sm text-gray-700">Dashboard</span>
                    </div>
                    <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                        <kbd class="px-2 py-1 bg-gray-200 rounded text-sm font-mono">Escape</kbd>
                        <span class="text-sm text-gray-700">Cerrar modales</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- User Management Modals -->
    <!-- Create User Modal -->
    <div id="createUserModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <h3 class="text-lg font-medium text-gray-900 mb-4">Crear Nuevo Usuario</h3>
                <form id="createUserForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nombre Completo</label>
                        <input type="text" id="userFullName" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nombre de Usuario</label>
                        <input type="text" id="userUsername" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                        <input type="email" id="userEmail" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Contraseña</label>
                        <input type="password" id="userPassword" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Rol</label>
                        <select id="userRole" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                            <option value="auditor">Auditor</option>
                            <option value="admin">Administrador</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Ubicación</label>
                        <select id="userLocation" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                            <option value="REMOTO">Remoto</option>
                            <option value="MX">México</option>
                            <option value="CL">Chile</option>
                        </select>
                    </div>
                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" onclick="closeCreateUserModal()" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300">
                            Cancelar
                        </button>
                        <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700">
                            Crear Usuario
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div id="editUserModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <h3 class="text-lg font-medium text-gray-900 mb-4">Editar Usuario</h3>
                <form id="editUserForm" class="space-y-4">
                    <input type="hidden" id="editUserId">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nombre Completo</label>
                        <input type="text" id="editUserFullName" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nombre de Usuario</label>
                        <input type="text" id="editUserUsername" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                        <input type="email" id="editUserEmail" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Rol</label>
                        <select id="editUserRole" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                            <option value="auditor">Auditor</option>
                            <option value="admin">Administrador</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Ubicación</label>
                        <select id="editUserLocation" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                            <option value="REMOTO">Remoto</option>
                            <option value="MX">México</option>
                            <option value="CL">Chile</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Estado</label>
                        <select id="editUserStatus" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                            <option value="true">Activo</option>
                            <option value="false">Inactivo</option>
                        </select>
                    </div>
                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" onclick="closeEditUserModal()" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300">
                            Cancelar
                        </button>
                        <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700">
                            Guardar Cambios
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div id="changePasswordModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <h3 class="text-lg font-medium text-gray-900 mb-4">Cambiar Contraseña</h3>
                <form id="changePasswordForm" class="space-y-4">
                    <input type="hidden" id="changePasswordUserId">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Nueva Contraseña</label>
                        <input type="password" id="newPassword" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Confirmar Contraseña</label>
                        <input type="password" id="confirmPassword" required class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm">
                    </div>
                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" onclick="closeChangePasswordModal()" class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300">
                            Cancelar
                        </button>
                        <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700">
                            Cambiar Contraseña
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Audit Section -->
    <div id="audit-section" class="section hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="bg-white rounded-lg shadow card-shadow">
                <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                    <h3 class="text-lg font-medium text-gray-900">Log de Auditoría</h3>
                    <button onclick="exportAuditLogs()" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition duration-200">
                        <i class="fas fa-download mr-2"></i>Exportar
                    </button>
                </div>
                <div class="p-6">
                    <!-- Filters -->
                    <div class="mb-6 grid grid-cols-1 md:grid-cols-4 gap-4">
                        <select id="auditActionFilter" class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                            <option value="">Todas las acciones</option>
                            <option value="LOGIN">Login</option>
                            <option value="ASSET_ASSIGNED">Asset Asignado</option>
                            <option value="ASSET_RETURNED">Asset Devuelto</option>
                            <option value="USER_CREATED">Usuario Creado</option>
                        </select>
                        <select id="auditLocationFilter" class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                            <option value="">Todas las ubicaciones</option>
                            <option value="MX">México</option>
                            <option value="CL">Chile</option>
                            <option value="REMOTO">Remoto</option>
                        </select>
                        <input type="date" id="auditStartDate" class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                        <input type="date" id="auditEndDate" class="border border-gray-300 rounded-md px-3 py-2 text-sm">
                    </div>
                    <!-- Audit Table -->
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Fecha</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Acción</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Usuario</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Recurso</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ubicación</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Detalles</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="auditTableBody" class="bg-white divide-y divide-gray-200">
                                <!-- Audit logs will be populated here -->
                            </tbody>
                        </table>
                    </div>
                    <!-- Pagination -->
                    <div id="auditPagination" class="mt-6 flex justify-between items-center">
                        <!-- Pagination will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/auth.js?v=14"></script>
    <script src="js/dashboard.js?v=3"></script>
    <script src="js/assets.js?v=2"></script>
    <script src="js/audit.js?v=3"></script>
    <script src="js/employees.js?v=3"></script>
    <!-- Debug scripts disabled to prevent UI overrides -->
    <!-- <script src="js/navigation-debug.js?v=1"></script> -->
    <script src="js/secure-proxy.js?v=2"></script>
    <script src="js/theme.js?v=3"></script>
    <script src="js/toast.js?v=3"></script>
    <script src="js/loading.js?v=3"></script>
    <script src="js/tooltip.js?v=3"></script>
    <script src="js/shortcuts.js?v=3"></script>
    <script src="js/animations.js?v=4"></script>
    <script src="js/icons.js?v=4"></script>
    <script src="js/colors.js?v=4"></script>
    <script src="js/cards.js?v=4"></script>
    <script src="js/progress-rings.js?v=4"></script>
    <script src="js/onboarding.js?v=2"></script>
    <script src="js/offboarding.js?v=2"></script>
    <script src="js/preferences.js?v=2"></script>
    <script src="js/users.js?v=999"></script>
    <script src="js/users-debug.js?v=4000"></script>
    <script src="js/app.js?v=10"></script>
    
    <!-- Custom Modal Styles -->
    <style>
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .modal-overlay.show .modal-content {
            transform: scale(1);
        }
        
        .modal-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .modal-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #3B82F6, #1D4ED8);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
        }
        
        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1F2937;
            margin: 0;
        }
        
        .modal-message {
            color: #6B7280;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }
        
        .modal-button {
            background: linear-gradient(135deg, #3B82F6, #1D4ED8);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
        }
        
        .modal-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }
    </style>

    <!-- Custom Modal HTML -->
    <div id="forgotPasswordModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-icon">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
                    </svg>
                </div>
                <h3 class="modal-title">Recuperar Contraseña</h3>
            </div>
            <p class="modal-message">
                Por favor, para recuperar tu cuenta, contacta a helpdesk.
            </p>
            <button class="modal-button" onclick="closeForgotPasswordModal()">
                Entendido
            </button>
        </div>
    </div>

    <!-- Modal Functions -->
    <script>
        function showForgotPasswordPopup() {
            const modal = document.getElementById('forgotPasswordModal');
            modal.classList.add('show');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }
        
        function closeForgotPasswordModal() {
            const modal = document.getElementById('forgotPasswordModal');
            modal.classList.remove('show');
            document.body.style.overflow = 'auto'; // Restore scrolling
        }
        
        // Close modal when clicking outside
        document.getElementById('forgotPasswordModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeForgotPasswordModal();
            }
        });
        
        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeForgotPasswordModal();
            }
        });
        
        // Toggle password visibility
        document.addEventListener('DOMContentLoaded', function() {
            const togglePassword = document.getElementById('togglePassword');
            const passwordInput = document.getElementById('password');
            const eyeIcon = document.getElementById('eyeIcon');
            
            if (togglePassword && passwordInput && eyeIcon) {
                togglePassword.addEventListener('click', function() {
                    const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                    passwordInput.setAttribute('type', type);
                    
                    // Toggle eye icon
                    if (type === 'text') {
                        eyeIcon.innerHTML = `
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21" />
                        `;
                    } else {
                        eyeIcon.innerHTML = `
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                        `;
                    }
                });
            }
        });
    </script>
</body>
</html>
